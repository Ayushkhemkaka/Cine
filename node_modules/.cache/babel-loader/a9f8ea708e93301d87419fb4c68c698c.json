{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ayush\\\\Desktop\\\\Ayush\\\\cine-movie\\\\src\\\\components\\\\PageComponent\\\\PageComponent.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Genres from \"../../components/Genres/Genres\";\nimport PageNumber from \"../../components/PageNumber/PageNumber\";\nimport SingleContent from \"../../components/SingleContent/SingleContent\";\nimport Styles from \"./PageComponent.module.css\";\nimport axios from \"axios\";\nimport { TextField } from \"@mui/material\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#f29200\"\n    },\n    text: {\n      primary: \"#f29200\",\n      secondary: \"#46505A\"\n    },\n    action: {\n      active: \"#001E3C\"\n    }\n  }\n});\n\nconst PageComponent = props => {\n  _s();\n\n  const {\n    pageName,\n    pageTitle\n  } = props;\n  const [contents, setContents] = useState([]);\n  const [numberOfPages, setNumberOfPages] = useState();\n  const [page, setPage] = useState(1);\n  const [genres, setGenres] = useState({\n    genresArray: [],\n    selectedGenres: []\n  });\n  const [searchText, setSearchText] = useState(\"\"); // const [lastSearchText, setLastSearchText] = useState(\"\");\n\n  const [openSearch, setOpenSearch] = useState(\"true\");\n  const [openGenres, setOpenGenres] = useState(\"true\");\n\n  const searchContent = value => {\n    setSearchText(value);\n    setPage(1);\n  };\n\n  useEffect(() => {\n    const getGenreForURL = () => {\n      // rearrange array of all the selected it into  string\n      // example: [3,7,12,4] ==> \"3,7,12,4\"\n      if (genres.selectedGenres.length < 1) return \"\";\n      const GenreIds = genres.selectedGenres.map(g => g.id);\n      return GenreIds.reduce((accumulator, currentId) => accumulator + \",\" + currentId);\n    };\n\n    const fetchPageData = async genresForURL => {\n      const {\n        data\n      } = await axios.get(`https://api.themoviedb.org/3/discover/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${page}&with_genres=${genresForURL}`);\n      setContents(data.results);\n      setNumberOfPages(data.total_pages);\n    };\n\n    const fetchSearch = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`https://api.themoviedb.org/3/search/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_video=false&page=${page}&query=${searchText}&include_adult=false`);\n        setContents(data.results);\n        setNumberOfPages(data.total_pages); // console.log(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const genresForURL = getGenreForURL();\n\n    if (searchText.length !== 0) {\n      setOpenSearch(true);\n      setOpenGenres(false);\n      fetchSearch();\n    } else if (genres.selectedGenres.length !== 0) {\n      fetchPageData(genresForURL);\n      setOpenGenres(true);\n      setOpenSearch(false);\n    } else {\n      fetchPageData(genresForURL);\n      setOpenSearch(true);\n      setOpenGenres(true); // setPage(1);\n    }\n  }, [page, genres.selectedGenres, pageName, searchText]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"pageHeading\",\n      children: pageTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: openSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.textField,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-basic\",\n          color: \"primary\",\n          label: \"Search\",\n          variant: \"outlined\",\n          sx: {\n            color: \"text.primary\"\n          },\n          focused: true,\n          onChange: e => searchContent(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), openGenres && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.genres,\n      children: /*#__PURE__*/_jsxDEV(Genres, {\n        type: pageName,\n        setPage: setPage,\n        genres: genres,\n        setGenres: setGenres\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), numberOfPages > 1 && /*#__PURE__*/_jsxDEV(PageNumber, {\n      setPage: setPage,\n      pageNumber: page,\n      numberOfPages: numberOfPages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.content,\n      children: contents && contents.map(content => /*#__PURE__*/_jsxDEV(SingleContent, {\n        id: content.id,\n        poster: content.poster_path,\n        title: content.title || content.name,\n        date: content.first_air_date || content.release_date,\n        media_type: pageName,\n        vote_average: content.vote_average\n      }, content.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), numberOfPages > 1 && /*#__PURE__*/_jsxDEV(PageNumber, {\n      setPage: setPage,\n      pageNumber: page,\n      numberOfPages: numberOfPages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PageComponent, \"v2ff8UTzGAP3Njw+2bUNWkNSiwk=\");\n\n_c = PageComponent;\nexport default PageComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"PageComponent\");","map":{"version":3,"names":["useState","useEffect","Genres","PageNumber","SingleContent","Styles","axios","TextField","createTheme","ThemeProvider","theme","palette","primary","main","text","secondary","action","active","PageComponent","props","pageName","pageTitle","contents","setContents","numberOfPages","setNumberOfPages","page","setPage","genres","setGenres","genresArray","selectedGenres","searchText","setSearchText","openSearch","setOpenSearch","openGenres","setOpenGenres","searchContent","value","getGenreForURL","length","GenreIds","map","g","id","reduce","accumulator","currentId","fetchPageData","genresForURL","data","get","results","total_pages","fetchSearch","error","console","textField","color","e","target","content","poster_path","title","name","first_air_date","release_date","vote_average"],"sources":["C:/Users/ayush/Desktop/Ayush/cine-movie/src/components/PageComponent/PageComponent.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Genres from \"../../components/Genres/Genres\";\r\nimport PageNumber from \"../../components/PageNumber/PageNumber\";\r\nimport SingleContent from \"../../components/SingleContent/SingleContent\";\r\nimport Styles from \"./PageComponent.module.css\";\r\nimport axios from \"axios\";\r\nimport { TextField } from \"@mui/material\";\r\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#f29200\",\r\n    },\r\n\r\n    text: {\r\n      primary: \"#f29200\",\r\n      secondary: \"#46505A\",\r\n    },\r\n    action: {\r\n      active: \"#001E3C\",\r\n    },\r\n  },\r\n});\r\n\r\nconst PageComponent = (props) => {\r\n  const { pageName, pageTitle } = props;\r\n\r\n  const [contents, setContents] = useState([]);\r\n  const [numberOfPages, setNumberOfPages] = useState();\r\n  const [page, setPage] = useState(1);\r\n  const [genres, setGenres] = useState({\r\n    genresArray: [],\r\n    selectedGenres: [],\r\n  });\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  // const [lastSearchText, setLastSearchText] = useState(\"\");\r\n  const [openSearch, setOpenSearch] = useState(\"true\");\r\n  const [openGenres, setOpenGenres] = useState(\"true\");\r\n\r\n  const searchContent = (value) => {\r\n    setSearchText(value);\r\n    setPage(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getGenreForURL = () => {\r\n      // rearrange array of all the selected it into  string\r\n      // example: [3,7,12,4] ==> \"3,7,12,4\"\r\n      if (genres.selectedGenres.length < 1) return \"\";\r\n\r\n      const GenreIds = genres.selectedGenres.map((g) => g.id);\r\n      return GenreIds.reduce(\r\n        (accumulator, currentId) => accumulator + \",\" + currentId\r\n      );\r\n    };\r\n    const fetchPageData = async (genresForURL) => {\r\n      const { data } = await axios.get(\r\n        `https://api.themoviedb.org/3/discover/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${page}&with_genres=${genresForURL}`\r\n      );\r\n      setContents(data.results);\r\n      setNumberOfPages(data.total_pages);\r\n    };\r\n    const fetchSearch = async () => {\r\n      try {\r\n        const { data } = await axios.get(\r\n          `https://api.themoviedb.org/3/search/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_video=false&page=${page}&query=${searchText}&include_adult=false`\r\n        );\r\n        setContents(data.results);\r\n        setNumberOfPages(data.total_pages);\r\n        // console.log(data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    const genresForURL = getGenreForURL();\r\n    if (searchText.length !== 0) {\r\n      setOpenSearch(true);\r\n      setOpenGenres(false);\r\n      fetchSearch();\r\n    } else if (genres.selectedGenres.length !== 0) {\r\n      fetchPageData(genresForURL);\r\n      setOpenGenres(true);\r\n      setOpenSearch(false);\r\n    } else {\r\n      fetchPageData(genresForURL);\r\n      setOpenSearch(true);\r\n      setOpenGenres(true);\r\n      // setPage(1);\r\n    }\r\n  }, [page, genres.selectedGenres, pageName, searchText]);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"pageHeading\">{pageTitle}</h1>\r\n      <ThemeProvider theme={theme}>\r\n        {openSearch && (\r\n          <div className={Styles.textField}>\r\n            <TextField\r\n              id=\"outlined-basic\"\r\n              color=\"primary\"\r\n              label=\"Search\"\r\n              variant=\"outlined\"\r\n              sx={{ color: \"text.primary\" }}\r\n              focused\r\n              onChange={(e) => searchContent(e.target.value)}\r\n            />\r\n          </div>\r\n        )}\r\n      </ThemeProvider>\r\n      {openGenres && (\r\n        <div className={Styles.genres}>\r\n          <Genres\r\n            type={pageName}\r\n            setPage={setPage}\r\n            genres={genres}\r\n            setGenres={setGenres}\r\n          />\r\n        </div>\r\n      )}\r\n      {numberOfPages > 1 && (\r\n        <PageNumber\r\n          setPage={setPage}\r\n          pageNumber={page}\r\n          numberOfPages={numberOfPages}\r\n        />\r\n      )}\r\n\r\n      <div className={Styles.content}>\r\n        {contents &&\r\n          contents.map((content) => (\r\n            <SingleContent\r\n              key={content.id}\r\n              id={content.id}\r\n              poster={content.poster_path}\r\n              title={content.title || content.name}\r\n              date={content.first_air_date || content.release_date}\r\n              media_type={pageName}\r\n              vote_average={content.vote_average}\r\n            />\r\n          ))}\r\n      </div>\r\n      {numberOfPages > 1 && (\r\n        <PageNumber\r\n          setPage={setPage}\r\n          pageNumber={page}\r\n          numberOfPages={numberOfPages}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}