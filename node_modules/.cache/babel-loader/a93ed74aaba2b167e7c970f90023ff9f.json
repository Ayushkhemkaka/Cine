{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/ayush/Desktop/Ayush/cine-movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ayush/Desktop/Ayush/cine-movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ayush\\\\Desktop\\\\Ayush\\\\cine-movie\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from\"react\";import Genres from\"../../components/Genres/Genres\";import PageNumber from\"../../components/PageNumber/PageNumber\";import SingleContent from\"../../components/SingleContent/SingleContent\";import Styles from\"./PageComponent.module.css\";import axios from\"axios\";import{TextField}from\"@mui/material\";import{createTheme,ThemeProvider}from\"@mui/material/styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var theme=createTheme({palette:{primary:{main:\"#f29200\"},text:{primary:\"#f29200\",secondary:\"#46505A\"},action:{active:\"#001E3C\"}}});var PageComponent=function PageComponent(props){var pageName=props.pageName,pageTitle=props.pageTitle;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contents=_useState2[0],setContents=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),numberOfPages=_useState4[0],setNumberOfPages=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState({genresArray:[],selectedGenres:[]}),_useState8=_slicedToArray(_useState7,2),genres=_useState8[0],setGenres=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),searchText=_useState10[0],setSearchText=_useState10[1];// const [lastSearchText, setLastSearchText] = useState(\"\");\nvar _useState11=useState(\"true\"),_useState12=_slicedToArray(_useState11,2),openSearch=_useState12[0],setOpenSearch=_useState12[1];var _useState13=useState(\"true\"),_useState14=_slicedToArray(_useState13,2),openGenres=_useState14[0],setOpenGenres=_useState14[1];var searchContent=function searchContent(value){setSearchText(value);setPage(1);};useEffect(function(){var getGenreForURL=function getGenreForURL(){// rearrange array of all the selected it into  string\n// example: [3,7,12,4] ==> \"3,7,12,4\"\nif(genres.selectedGenres.length<1)return\"\";var GenreIds=genres.selectedGenres.map(function(g){return g.id;});return GenreIds.reduce(function(accumulator,currentId){return accumulator+\",\"+currentId;});};var fetchPageData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(genresForURL){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.themoviedb.org/3/discover/\".concat(pageName,\"?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=\").concat(page,\"&with_genres=\").concat(genresForURL));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setContents(data.results);setNumberOfPages(data.total_pages);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchPageData(_x){return _ref.apply(this,arguments);};}();var fetchSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"https://api.themoviedb.org/3/search/\".concat(pageName,\"?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_video=false&page=\").concat(page,\"&query=\").concat(searchText,\"&include_adult=false\"));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setContents(data.results);setNumberOfPages(data.total_pages);// console.log(data);\n_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchSearch(){return _ref2.apply(this,arguments);};}();var genresForURL=getGenreForURL();if(searchText.length!==0){setOpenSearch(true);setOpenGenres(false);fetchSearch();}else if(genres.selectedGenres.length!==0){fetchPageData(genresForURL);setOpenGenres(true);setOpenSearch(false);}else{fetchPageData(genresForURL);setOpenSearch(true);setOpenGenres(true);// setPage(1);\n}},[page,genres.selectedGenres,pageName,searchText]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pageHeading\",children:pageTitle}),/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:openSearch&&/*#__PURE__*/_jsx(\"div\",{className:Styles.textField,children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",color:\"primary\",label:\"Search\",variant:\"outlined\",sx:{color:\"text.primary\"},focused:true,onChange:function onChange(e){return searchContent(e.target.value);}})})}),openGenres&&/*#__PURE__*/_jsx(\"div\",{className:Styles.genres,children:/*#__PURE__*/_jsx(Genres,{type:pageName,setPage:setPage,genres:genres,setGenres:setGenres})}),numberOfPages>1&&/*#__PURE__*/_jsx(PageNumber,{setPage:setPage,pageNumber:page,numberOfPages:numberOfPages}),/*#__PURE__*/_jsx(\"div\",{className:Styles.content,children:contents&&contents.map(function(content){return/*#__PURE__*/_jsx(SingleContent,{id:content.id,poster:content.poster_path,title:content.title||content.name,date:content.first_air_date||content.release_date,media_type:pageName,vote_average:content.vote_average},content.id);})}),numberOfPages>1&&/*#__PURE__*/_jsx(PageNumber,{setPage:setPage,pageNumber:page,numberOfPages:numberOfPages})]});};export default PageComponent;","map":{"version":3,"names":["useState","useEffect","Genres","PageNumber","SingleContent","Styles","axios","TextField","createTheme","ThemeProvider","theme","palette","primary","main","text","secondary","action","active","PageComponent","props","pageName","pageTitle","contents","setContents","numberOfPages","setNumberOfPages","page","setPage","genresArray","selectedGenres","genres","setGenres","searchText","setSearchText","openSearch","setOpenSearch","openGenres","setOpenGenres","searchContent","value","getGenreForURL","length","GenreIds","map","g","id","reduce","accumulator","currentId","fetchPageData","genresForURL","get","data","results","total_pages","fetchSearch","console","error","textField","color","e","target","content","poster_path","title","name","first_air_date","release_date","vote_average"],"sources":["C:/Users/ayush/Desktop/Ayush/cine-movie/src/components/PageComponent/PageComponent.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Genres from \"../../components/Genres/Genres\";\r\nimport PageNumber from \"../../components/PageNumber/PageNumber\";\r\nimport SingleContent from \"../../components/SingleContent/SingleContent\";\r\nimport Styles from \"./PageComponent.module.css\";\r\nimport axios from \"axios\";\r\nimport { TextField } from \"@mui/material\";\r\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#f29200\",\r\n    },\r\n\r\n    text: {\r\n      primary: \"#f29200\",\r\n      secondary: \"#46505A\",\r\n    },\r\n    action: {\r\n      active: \"#001E3C\",\r\n    },\r\n  },\r\n});\r\n\r\nconst PageComponent = (props) => {\r\n  const { pageName, pageTitle } = props;\r\n\r\n  const [contents, setContents] = useState([]);\r\n  const [numberOfPages, setNumberOfPages] = useState();\r\n  const [page, setPage] = useState(1);\r\n  const [genres, setGenres] = useState({\r\n    genresArray: [],\r\n    selectedGenres: [],\r\n  });\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  // const [lastSearchText, setLastSearchText] = useState(\"\");\r\n  const [openSearch, setOpenSearch] = useState(\"true\");\r\n  const [openGenres, setOpenGenres] = useState(\"true\");\r\n\r\n  const searchContent = (value) => {\r\n    setSearchText(value);\r\n    setPage(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getGenreForURL = () => {\r\n      // rearrange array of all the selected it into  string\r\n      // example: [3,7,12,4] ==> \"3,7,12,4\"\r\n      if (genres.selectedGenres.length < 1) return \"\";\r\n\r\n      const GenreIds = genres.selectedGenres.map((g) => g.id);\r\n      return GenreIds.reduce(\r\n        (accumulator, currentId) => accumulator + \",\" + currentId\r\n      );\r\n    };\r\n    const fetchPageData = async (genresForURL) => {\r\n      const { data } = await axios.get(\r\n        `https://api.themoviedb.org/3/discover/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${page}&with_genres=${genresForURL}`\r\n      );\r\n      setContents(data.results);\r\n      setNumberOfPages(data.total_pages);\r\n    };\r\n    const fetchSearch = async () => {\r\n      try {\r\n        const { data } = await axios.get(\r\n          `https://api.themoviedb.org/3/search/${pageName}?api_key=3a05ea73439bb4d6bb0aa75de8977942&language=en-US&sort_by=popularity.desc&include_video=false&page=${page}&query=${searchText}&include_adult=false`\r\n        );\r\n        setContents(data.results);\r\n        setNumberOfPages(data.total_pages);\r\n        // console.log(data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    const genresForURL = getGenreForURL();\r\n    if (searchText.length !== 0) {\r\n      setOpenSearch(true);\r\n      setOpenGenres(false);\r\n      fetchSearch();\r\n    } else if (genres.selectedGenres.length !== 0) {\r\n      fetchPageData(genresForURL);\r\n      setOpenGenres(true);\r\n      setOpenSearch(false);\r\n    } else {\r\n      fetchPageData(genresForURL);\r\n      setOpenSearch(true);\r\n      setOpenGenres(true);\r\n      // setPage(1);\r\n    }\r\n  }, [page, genres.selectedGenres, pageName, searchText]);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"pageHeading\">{pageTitle}</h1>\r\n      <ThemeProvider theme={theme}>\r\n        {openSearch && (\r\n          <div className={Styles.textField}>\r\n            <TextField\r\n              id=\"outlined-basic\"\r\n              color=\"primary\"\r\n              label=\"Search\"\r\n              variant=\"outlined\"\r\n              sx={{ color: \"text.primary\" }}\r\n              focused\r\n              onChange={(e) => searchContent(e.target.value)}\r\n            />\r\n          </div>\r\n        )}\r\n      </ThemeProvider>\r\n      {openGenres && (\r\n        <div className={Styles.genres}>\r\n          <Genres\r\n            type={pageName}\r\n            setPage={setPage}\r\n            genres={genres}\r\n            setGenres={setGenres}\r\n          />\r\n        </div>\r\n      )}\r\n      {numberOfPages > 1 && (\r\n        <PageNumber\r\n          setPage={setPage}\r\n          pageNumber={page}\r\n          numberOfPages={numberOfPages}\r\n        />\r\n      )}\r\n\r\n      <div className={Styles.content}>\r\n        {contents &&\r\n          contents.map((content) => (\r\n            <SingleContent\r\n              key={content.id}\r\n              id={content.id}\r\n              poster={content.poster_path}\r\n              title={content.title || content.name}\r\n              date={content.first_air_date || content.release_date}\r\n              media_type={pageName}\r\n              vote_average={content.vote_average}\r\n            />\r\n          ))}\r\n      </div>\r\n      {numberOfPages > 1 && (\r\n        <PageNumber\r\n          setPage={setPage}\r\n          pageNumber={page}\r\n          numberOfPages={numberOfPages}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}